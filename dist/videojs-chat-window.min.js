!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojsChatWindow=t(e.videojs)}(this,function(e){"use strict";const t=e.getPlugin("plugin");class s extends t{constructor(t,s={}){super(t,s),this.options_=s,t.ready(()=>{this.container||(this.container=e.dom.createEl("div",{className:"vjs-chat-window"}),this.messages=e.dom.createEl("div",{className:"vjs-chat-messages",attributes:{role:"log","aria-live":"polite"}}),this.input=e.dom.createEl("input",{className:"vjs-chat-input",type:"text",placeholder:s.placeholder||"Type a messageâ€¦",attributes:{"aria-label":"Chat input"}}),this.container.appendChild(this.messages),this.container.appendChild(this.input),t.el().appendChild(this.container),this._onKeyDown=e=>{"Enter"===e.key&&this.input.value.trim()&&(this.addMessage(s.username||"You",this.input.value.trim()),this.input.value="")},this.input.addEventListener("keydown",this._onKeyDown),t.addClass("vjs-has-chat-window"),this.on(t,"dispose",()=>this.dispose()))})}addMessage(t,s){const i=e.dom.createEl("div",{className:"vjs-chat-message",innerHTML:'<strong class="vjs-chat-user"></strong><span class="vjs-chat-text"></span>'});i.querySelector(".vjs-chat-user").textContent=`${t}: `,i.querySelector(".vjs-chat-text").textContent=s,this.messages.appendChild(i),this.messages.scrollTop=this.messages.scrollHeight}dispose(){this.input&&this._onKeyDown&&this.input.removeEventListener("keydown",this._onKeyDown),this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.player_&&this.player_.removeClass("vjs-has-chat-window"),super.dispose()}}return e.registerPlugin("chatWindow",function(e){return this.chatWindow_||(this.chatWindow_=new s(this,e)),this.chatWindow_}),s});
