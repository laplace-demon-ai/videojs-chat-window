!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],s):(e="undefined"!=typeof globalThis?globalThis:e||self).videojsChatWindow=s(e.videojs)}(this,function(e){"use strict";const s=e.getPlugin("plugin");class t extends s{constructor(s,t={}){super(s,t),this.options_=t,s.ready(()=>{this.container||(this.container=e.dom.createEl("div",{className:"vjs-chat-window"}),this.messages=e.dom.createEl("div",{className:"vjs-chat-messages"}),this.messages.setAttribute("role","log"),this.messages.setAttribute("aria-live","polite"),this.input=e.dom.createEl("input",{className:"vjs-chat-input",type:"text",placeholder:t.placeholder||"Type a messageâ€¦"}),this.input.setAttribute("aria-label","Chat input"),this.container.appendChild(this.messages),this.container.appendChild(this.input),s.el().appendChild(this.container),this._onKeyDown=e=>{"Enter"===e.key&&this.input.value.trim()&&(this.addMessage(t.username||"You",this.input.value.trim()),this.input.value="")},this.input.addEventListener("keydown",this._onKeyDown),s.addClass("vjs-has-chat-window"),this.on(s,"dispose",()=>this.dispose()))})}addMessage(s,t){if(!this.messages)return;const i=e.dom.createEl("div",{className:"vjs-chat-message",innerHTML:'<strong class="vjs-chat-user"></strong><span class="vjs-chat-text"></span>'});i.querySelector(".vjs-chat-user").textContent=`${s}: `,i.querySelector(".vjs-chat-text").textContent=t,this.messages.appendChild(i),this.messages.scrollTop=this.messages.scrollHeight}dispose(){this.input&&this._onKeyDown&&this.input.removeEventListener("keydown",this._onKeyDown),this.container?.parentNode&&this.container.parentNode.removeChild(this.container),this.player_&&this.player_.removeClass("vjs-has-chat-window"),super.dispose()}}return e.registerPlugin("chatWindow",function(e){return this.chatWindow_||(this.chatWindow_=new t(this,e)),this.chatWindow_}),t});
